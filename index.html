<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <!-- Define a codifica√ß√£o de caracteres -->
    <meta charset="UTF-8">
    <!-- Responsivo para diferentes dispositivos -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProtoCord</title>

    <!-- √çcone da aba com emoji -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü©π</text></svg>">

    <!-- Script do Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0FRFV9Z0P1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-0FRFV9Z0P1');
    </script>

    <!-- √çcones Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container" style="position: relative;">
        
          <!-- Vers√£o alinhada √† esquerda -->
          <div style="position: absolute; top: 10px; left: 10px; font-weight: bold;">
            v3.0.0
          </div>

          <!-- Bot√£o de download alinhado √† direita -->
          <div style="position: absolute; top: 10px; right: 10px;">
            <a href="https://github.com/hasbuen/ProtoCordMonitor/releases/download/v1.0.0/Setup_ProtoCord_Monitor.exe" class="botao-destaque">
              üì• Baixar ProtoCord Monitor
            </a>
          </div>

        <!-- Cards de contadores: erros e sugest√µes -->
        <div class="contador-cards-container">
            <div class="contador-card contador-card-erros">
                <h3>üîß Erros</h3>
                <p id="contador-erros" class="skeleton-loader">&nbsp;</p>
            </div>
            <div class="contador-card contador-card-sugestoes">
                <h3>üí° Sugest√µes</h3>
                <p id="contador-sugestoes" class="skeleton-loader">&nbsp;</p>
            </div>
        </div>

         <!-- Bot√£o para exibir ou ocultar a tabela -->
        <button class="toggle-button" onclick="mostrarTabela()">
            <span id="texto-toggle">Exibir hist√≥rico!</span>
            <i id="icon-toggle" class="fas fa-chevron-down icon"></i>
        </button>

        <button class="toggle-button" onclick="mostrarLiberacoes()">
            <span id="texto-toggle-liberacoes">üìÇ Verificar libera√ß√µes</span>
            <i id="icon-toggle-liberacoes" class="fas fa-chevron-down icon"></i>
        </button>

        <!-- Tabela oculta por padr√£o -->
        <div class="tabela-container hidden" id="tabela-container">
            <!-- Campo de busca -->
            <input type="text" id="busca" class="input-busca" placeholder="Buscar registros..."
                onkeyup="filtrarTabela()" />
            <table id="tabelaRegistros">
                <thead>
                    <tr>
                        <th onclick="ordenarTabela(0)">
                            üîó Ticket
                            <span class="icone-ordenacao">&#10580;&#10581;</span>
                        </th>
                        <th onclick="ordenarTabela(1)">
                            ‚öôÔ∏è Protocolo
                            <span class="icone-ordenacao">&#10580;&#10581;</span>
                        </th>
                        <th onclick="ordenarTabela(2)">
                            Tipo
                            <span class="icone-ordenacao">&#10580;&#10581;</span>
                        </th>
                        <th onclick="ordenarTabela(3)">
                            Descri√ß√£o
                            <span class="icone-ordenacao">&#10580;&#10581;</span>
                        </th>
                        <th>
                            üíä Paliativo
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Conte√∫do din√¢mico via JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- T√≠tulo principal -->
        <h1>ü©π ProtoCord</h1>

        <!-- Layout principal em duas colunas -->
        <div class="grid">
            <!-- Coluna da esquerda: inputs -->
            <div class="column-left">
                <div class="inputs">
                    <!-- Sele√ß√£o do tipo: Erro ou Sugest√£o -->
                    <div class="radio-group">
                        <div>
                            <span class="tipo-opcao erro" data-tipo="erro">Erro</span>
                            <span class="tipo-opcao sugestao" data-tipo="sugestao">Sugest√£o</span>
                            <input type="hidden" id="tipo" name="tipo">
                        </div>
                    </div>

                    <!-- Script para alternar visual e valor do tipo selecionado -->
                    <script>
                        document.querySelectorAll(".tipo-opcao").forEach(el => {
                            el.onclick = () => {
                                document.querySelectorAll(".tipo-opcao").forEach(e => e.classList.remove("ativo"));
                                el.classList.add("ativo");
                                document.getElementById("tipo").value = el.dataset.tipo;
                            };
                        });
                    </script>

                    <!-- Campo PRT -->
                    <div>
                        <label for="prt">PRT:</label>
                        <input type="text" id="prt" placeholder="Digite o PRT" required>
                    </div>

                    <!-- Campo Ticket -->
                    <div>
                        <label for="ticket">Ticket:</label>
                        <input type="text" id="ticket" placeholder="Digite o n√∫mero do ticket.." required>
                    </div>

                    <!-- Campo Descri√ß√£o -->
                    <div>
                        <label for="descricao">Descri√ß√£o resumida:</label>
                        <textarea id="descricao" placeholder="Digite a descri√ß√£o resumida aqui.." required></textarea>
                    </div>

                    <!-- Campo Paliativo com op√ß√µes r√°pidas -->
                    <div>
                        <div class="input-group">
                            <label for="paliativo">Paliativo:</label>
                            <select id="paliativoSelect" onchange="togglePaliativo()">
                                <option value=""></option>
                                <option value="n√£o encontrado.">Paliativo n√£o encontrado.</option>
                                <option value="nova funcionalidade.">Nova funcionalidade.</option>
                            </select>
                        </div>
                        <textarea id="paliativo" placeholder="Digite o paliativo aqui.." required></textarea>
                    </div>

                    <!-- Campo Prazo com sele√ß√£o r√°pida -->
                    <div>
                        <div class="input-group">
                            <label for="prazo">Prazo:</label>
                            <select id="prazoSelect" onchange="togglePrazo()">
                                <option value=""></option>
                                <option value="encaminhado para avalia√ß√£o de aloca√ß√£o.">Encaminhar para avalia√ß√£o de
                                    aloca√ß√£o.</option>
                                <option value="registrado no banco de dados RhedeSAC.">Registrar no banco de dados
                                    RhedeSAC.</option>
                            </select>
                        </div>
                        <input type="text" id="prazo" placeholder="Digite o prazo..." />
                    </div>

                    <!-- Script para preencher automaticamente os campos de paliativo e prazo -->
                    <script>
                        function togglePaliativo() {
                            const select = document.getElementById("paliativoSelect");
                            const textarea = document.getElementById("paliativo");

                            if (select.value) {
                                textarea.value = select.value;
                                textarea.disabled = true;
                            } else {
                                textarea.value = "";
                                textarea.disabled = false;
                            }
                        }

                        function togglePrazo() {
                            const select = document.getElementById("prazoSelect");
                            const input = document.getElementById("prazo");

                            if (select.value) {
                                input.value = select.value;
                                input.disabled = true;
                            } else {
                                input.value = "";
                                input.disabled = false;
                            }
                        }
                    </script>

                    <!-- Campo Link -->
                    <div class="link">
                        <label for="link">Link:</label>
                        <input type="text" class="link" id="link" placeholder="Cole o link do ticket aqui.." required>
                    </div>
                </div>

                <!-- Bot√£o para gerar o texto final -->
                <button onclick="gerarTexto()">Gerar</button>
            </div>

            <!-- Coluna da direita: exibi√ß√£o do resultado -->
            <div class="column-right">
                <label for="output">Cole no discord:</label>
                <textarea id="output" readonly></textarea>
                <button onclick="copiarTexto()">Copiar</button>
            </div>
        </div>
    </div>

    <div class="tabela-container hidden" id="liberacoes-container">
          <!-- Campo oculto que ser√° clicado via JS -->
          <input type="file" id="arquivoRTF" accept=".rtf" onchange="processarRTF(event)">
    </div>

    <!-- Modal de mensagens de erro/sucesso/info -->
    <div id="errorModal" class="modal">
        <div class="modal-content">
            <p id="modalMessage">
                <span id="modalIcon" style="margin-right: 8px;"></span>
                <span id="modalText"></span>
            </p>
            <div class="modal-footer">
                <button class="close-btn" onclick="fecharModal()">Compreendi</button>
            </div>
        </div>
    </div>

    <!-- Modal espec√≠fico para visualizar o paliativo -->
    <div id="paliativoModal" class="modal">
        <div class="modal-content" id="paliativoModalContent">
            <div class="modal-header" id="paliativoModalHeader" style="cursor: move;">
                <strong style="flex: 1;">üíä Paliativo</strong>
            </div>
            <div class="modal-body">
                <pre id="paliativoModalText" style="white-space: pre-wrap;"></pre>
            </div>
            <div class="modal-footer">
                <button onclick="copiarTextoPaliativo()" class="btn-paliativo">Copiar Texto</button>
                <button onclick="fecharPaliativoModal()" class="btn-paliativo">Fechar</button>
            </div>
        </div>
    </div>

<div id="modalExclusao" class="modal-exclusao" style="display: none;">
  <div class="modal-conteudo">
    <h2 class="modal-titulo">
      <i class="fas fa-trash-alt" style="color: #dc3545; margin-right: 8px;"></i>
      Confirmar Exclus√£o
    </h2>
    <p class="modal-texto">
      Para excluir o registro, digite <strong id="ticketEsperado" style="color:#2ecc71;"></strong> abaixo:
    </p>
    <input type="text" id="inputConfirmacao" class="modal-input" oninput="verificarConfirmacao()" placeholder="Digite o n√∫mero do protocolo" />
    
    <div class="modal-botoes">
      <button id="btnConfirmar" onclick="confirmarExclusao()" class="btn-confirmar" disabled>Confirmar</button>
      <button onclick="fecharModalEclusao()" class="btn-cancelar">Cancelar</button>
    </div>
  </div>
</div>

    <!-- Importa o script principal com a l√≥gica JS -->
    <script src="mecanica.js"></script>

    <script src="verificacao_release.js"></script>

</body>

</html>
