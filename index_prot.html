<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProtoCord</title>

  <!-- Normalize, Tailwind, Animate e fontes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Ícones -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- CSS customizado -->
  <link rel="stylesheet" href="style.css">
</head>

<body class="p-6">

  <div class="max-w-6xl mx-auto space-y-6" id="app">
    <div id="header"></div>
    <div id="home"></div>
    <div id="historico"></div>
    <div id="liberacoes"></div>
    <div id="historico-liberacoes"></div>
    <div id="ia"></div>
    <div id="modals"></div>
  </div>

  <!-- Dependências -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module" src="js/main.js"></script>
  <script src="verificacao_release.js"></script>

  <!-- TensorFlow e modelos -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3/dist/universal-sentence-encoder.js"></script>

  <!-- Scripts locais -->
  <script src="js/config.js"></script>
  <script src="js/dom.js"></script>
  <script src="js/history.js"></script>
  <script src="js/model.js"></script>
  <script src="js/similarity.js"></script>
  <script src="js/responses.js"></script>
  <script src="js/ml.js"></script>

  <script>
    async function carregarParcial(id, arquivo) {
      try {
        const resp = await fetch(`partials/${arquivo}`);
        if (!resp.ok) {
          console.error(`Erro ao carregar ${arquivo}:`, resp.statusText);
          return;
        }
        const html = await resp.text();
        document.getElementById(id).innerHTML = html;
      } catch (err) {
        console.error(`Falha ao carregar ${arquivo}:`, err);
      }
    }

    // Carregar todas as partes
    window.addEventListener("DOMContentLoaded", () => {
      carregarParcial("header", "header.html");
      carregarParcial("home", "home.html");
      carregarParcial("historico", "historico.html");
      carregarParcial("liberacoes", "liberacoes.html");
      carregarParcial("historico-liberacoes", "historico-liberacoes.html");
      carregarParcial("ia", "ml.html");
      carregarParcial("modals", "modals.html");
    });
  </script>

  <script>
    lucide.createIcons();
    let iaModelLoaded = false;

    function mostrarPagina(paginaId) {
      // Esconde todas
      document.querySelectorAll('[id^="pagina-"]').forEach(p => p.classList.add('hidden'));
      document.getElementById(`pagina-${paginaId}`).classList.remove('hidden');

      // Resetar botões
      document.querySelectorAll('.flex-wrap.gap-3.justify-center button').forEach(btn => {
        btn.classList.remove('bg-blue-600', 'hover:bg-blue-500');
        btn.classList.add('bg-gray-800', 'hover:bg-gray-700');
      });

      // Ativar botão da página
      const botaoAtivo = document.getElementById(`btn-${paginaId}`);
      if (botaoAtivo) {
        botaoAtivo.classList.remove('bg-gray-800', 'hover:bg-gray-700');
        botaoAtivo.classList.add('bg-blue-600', 'hover:bg-blue-500');
      }

      // Casos especiais
      if (paginaId === 'liberacoes') {
        const input = document.getElementById('arquivoRTF');
        if (input) input.click();
      }

      if (paginaId === 'historico-liberacoes' && typeof carregarHistoricoLiberacoes === "function") {
        carregarHistoricoLiberacoes();
      }

      if (paginaId === 'ia' && !iaModelLoaded && typeof loadModelAndData === "function") {
        loadModelAndData();
        iaModelLoaded = true;
      }
    }
  </script>

</body>

</html>
